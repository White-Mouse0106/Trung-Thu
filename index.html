<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Trung Thu Galaxy ‚Äî D√†nh cho B·∫°n</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="sceneWrapper">
    <div id="container" role="main" aria-label="L·ªùi ch√∫c Trung Thu">
      <canvas id="bg" aria-hidden="true"></canvas>

      <!-- Moon with music icon -->
      <div id="moon" aria-hidden="false">
        <button id="musicIcon" aria-label="B·∫≠t/T·∫Øt nh·∫°c">üéµ</button>
      </div>

      <!-- rabbit (CSS animated sprite) -->
      <div id="rabbit" aria-hidden="true" title="Th·ªè Trung Thu">
        <div class="rabbit-ear ear-left"></div>
        <div class="rabbit-ear ear-right"></div>
        <div class="rabbit-head">
          <div class="eye left"></div>
          <div class="eye right"></div>
          <div class="nose"></div>
        </div>
        <div class="rabbit-body">
          <div class="leg leg-front"></div>
          <div class="leg leg-back"></div>
        </div>
      </div>

      <!-- logo appears after rabbit run -->
      <button id="logoBtn" aria-label="M·ªü th∆∞" title="Just For You">
        <div class="logo-circle"><span>For<br>you</span></div>
      </button>

      <!-- greetings -->
      <div id="greetings">
        <h1>Ch√∫c Trung Thu H·∫°nh Ph√∫c</h1>
        <h2>D√†nh ri√™ng cho <span>‚ÄúB·∫°n‚Äù</span></h2>
      </div>
    </div>
  </div>

  <!-- popup letter (hidden until click) -->
  <div id="popupOverlay" aria-hidden="true">
    <div id="envelope" role="dialog" aria-modal="true" aria-label="B·ª©c th∆∞ Trung Thu">
      <div id="envelopeTop" class="envelope-top"></div>
      <div id="envelopeBody" class="envelope-body">
        <div class="letter-inner">
          <h3 class="letter-title">G·ª≠i B·∫°n</h3>
          <p class="letter-msg">Ch√∫c b·∫°n m·ªôt Trung Thu tr·ªçn v·∫πn ‚Äî an y√™n, h·∫°nh ph√∫c v√† nhi·ªÅu n·ª• c∆∞·ªùi.</p>

          <div class="gift-area">
            <button id="giftBox" aria-label="M·ªü qu√†">üéÅ</button>
          </div>
        </div>
      </div>
      <button id="closeLetter" aria-label="ƒê√≥ng th∆∞">‚úï</button>
    </div>
  </div>

  <!-- audio: main track (play/pause via icon) -->
  <audio id="bgm" src="ThangCuoi.mp3" loop preload="auto"></audio>

  <!-- envelope open sound -->
  <audio id="openSfx" src="open-letter.mp3" preload="auto"></audio>

  <script src="script.js"></script>

  <!-- ===== POPUP XOAY M√ÄN H√åNH ===== -->
<div id="orientationNotice" class="notice">
  <div class="notice-box">
    <h2>üåï Vui l√≤ng xoay ngang m√†n h√¨nh</h2>
    <p>ƒê·ªÉ th∆∞·ªüng th·ª©c tr·ªçn v·∫πn m√≥n qu√† Trung Thu nh√© üíù</p>
  </div>
</div>

<script>
  const notice = document.getElementById('orientationNotice');
  const mainContent = document.getElementById('sceneWrapper');

  function checkOrientation() {
    // N·∫øu chi·ªÅu cao > chi·ªÅu r·ªông => ƒëang d·ªçc
    if (window.innerHeight > window.innerWidth && /Mobi|Android|iPhone/i.test(navigator.userAgent)) {
      notice.style.display = 'flex';
      mainContent.style.filter = 'blur(10px)';
      mainContent.style.pointerEvents = 'none';
    } else {
      notice.style.display = 'none';
      mainContent.style.filter = 'none';
      mainContent.style.pointerEvents = 'auto';
    }
  }

  window.addEventListener('resize', checkOrientation);
  window.addEventListener('orientationchange', checkOrientation);
  document.addEventListener('DOMContentLoaded', checkOrientation);
</script>

<style>
  /* ===== STYLE POPUP XOAY NGANG ===== */
  #orientationNotice {
    position: fixed;
    inset: 0;
    background: rgba(10, 0, 20, 0.9);
    backdrop-filter: blur(6px);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
    animation: fadeIn 0.6s ease;
  }
  .notice-box {
    background: linear-gradient(180deg, rgba(255,255,255,0.1), rgba(255,255,255,0.04));
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 18px;
    padding: 30px 25px;
    width: 80%;
    max-width: 380px;
    box-shadow: 0 0 25px rgba(255, 200, 255, 0.3);
  }
  .notice-box h2 {
    font-family: 'Great Vibes', cursive;
    color: #ffd78a;
    margin-bottom: 12px;
    font-size: 26px;
    text-shadow: 0 0 15px rgba(255,220,150,0.8);
  }
  .notice-box p {
    font-size: 16px;
    color: #ffeef9;
    line-height: 1.5;
    text-shadow: 0 0 10px rgba(255,200,240,0.4);
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
</style>

</body>
</html>
