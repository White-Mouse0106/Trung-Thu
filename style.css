@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600&display=swap');

body, html {
  margin: 0;
  padding: 0;
  overflow: hidden;
  height: 100%;
  width: 100%;
  font-family: 'Quicksand', sans-serif;
  color: #fff;
  background: radial-gradient(circle at 30% 20%, #3a0058, #080018 80%);
}

/* ===== XOAY KHUNG CẢNH ===== */
#sceneWrapper {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  perspective: 1000px;
  transition: transform 0.3s ease-out;
}

/* ===== SAO ===== */
.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 2s infinite ease-in-out;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.2; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.5); }
}

/* ===== MẶT TRĂNG ===== */
#moon {
  position: absolute;
  top: 10%;
  right: 10%;
  width: 180px;   /* nhỏ hơn trước */
  height: 180px;
  background: radial-gradient(circle at 30% 30%, #fff8c9, #ffd78a 70%, transparent 100%);
  border-radius: 50%;
  box-shadow: 0 0 80px rgba(255, 230, 180, 0.7);
  z-index: 3;
  animation: moonBreath 4s ease-in-out infinite; /* hơi thở */
}

/* Hơi thở của mặt trăng */
@keyframes moonBreath {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 50px rgba(255, 240, 200, 0.7);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 90px rgba(255, 255, 220, 0.9);
  }
}

/* Nốt nhạc nằm giữa trăng */
#musicIcon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 42px;
  cursor: pointer;
  color: #ffdf80;
  text-shadow: 0 0 10px #ffd700, 0 0 25px rgba(255, 230, 180, 0.9);
  animation: glowNote 2s ease-in-out infinite;
}

@keyframes glowNote {
  0%, 100% { opacity: 0.8; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
}

/* ===== ĐÈN LỒNG, CHỮ, ẢNH BAY (giữ nguyên như cũ) ===== */
.cloud {
  position: absolute;
  background: rgba(255,255,255,0.08);
  border-radius: 50%;
  filter: blur(20px);
  animation: cloudMove 60s linear infinite;
  z-index: 1;
}

@keyframes cloudMove {
  0% { transform: translateX(-200px); }
  100% { transform: translateX(110vw); }
}

.lantern {
  position: absolute;
  font-size: 28px;
  animation: flyLantern 20s linear infinite;
  opacity: 0.8;
  z-index: 3;
}

@keyframes flyLantern {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-20vh) rotate(10deg); opacity: 0; }
}

.floating-text {
  position: absolute;
  color: #ffb1e8;
  font-family: 'Great Vibes', cursive;
  font-size: 28px;
  opacity: 0.9;
  text-shadow: 0 0 15px #ff83c2, 0 0 25px rgba(255,200,255,0.4);
  animation: floatText 22s linear infinite;
  white-space: nowrap;
  z-index: 4;
}

@keyframes floatText {
  0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-20vh) translateX(50px) rotate(8deg); opacity: 0; }
}

.floating-img {
  position: absolute;
  border-radius: 10px;
  box-shadow: 0 0 25px rgba(255, 180, 220, 0.6);
  z-index: 4;
}

#greetings {
  position: absolute;
  top: 25%;
  left: 6%;
  z-index: 5;
  color: #ffeef7;
  text-shadow: 0 0 20px #ff8ad1, 0 0 35px rgba(255, 180, 230, 0.6);
}

#greetings h1 {
  font-family: 'Great Vibes', cursive;
  font-size: 72px;
  margin: 0;
}

#greetings h2 {
  font-size: 22px;
  margin-top: 10px;
  color: #ffd78a;
  text-shadow: 0 0 12px #ffd78a;
}
:root{
  --bg1:#2b003f; --bg2:#040007;
  --pink:#ff83c2; --gold:#ffd78a;
  --glass: rgba(255,255,255,0.04);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;width:100%;font-family:Quicksand,system-ui,Arial;background:radial-gradient(circle at 25% 18%, #3a0058 0%, #080018 60%, #030005 100%);color:#fff;overflow:hidden}
button{background:transparent;border:none;cursor:pointer}

/* scene container for 3D rotate */
#sceneWrapper{width:100%;height:100%;transform-style:preserve-3d;perspective:1100px;transition:transform .25s ease-out}
#container{position:relative;width:100%;height:100%;overflow:hidden}

/* canvas fallback (not used; stars generated via DOM) */
#bg{position:absolute;inset:0;z-index:0;pointer-events:none}

/* --- MOON (breathing) --- */
#moon{position:absolute;top:8%;right:8%;width:170px;height:170px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff8d6 0%, #ffdf9a 60%, transparent 100%);
  box-shadow:0 0 70px rgba(255,220,120,0.45);z-index:50;display:flex;align-items:center;justify-content:center;transform-origin:center;animation:moonBreath 4s ease-in-out infinite}
@keyframes moonBreath{0%,100%{transform:scale(1);box-shadow:0 0 50px rgba(255,240,200,0.6)}50%{transform:scale(1.06);box-shadow:0 0 110px rgba(255,250,210,0.95)}}

/* music icon */
#musicIcon{font-size:36px;color:var(--gold);text-shadow:0 0 8px rgba(255,220,120,0.9);outline:none}
#musicIcon.playing{transform:scale(.9)}

/* greetings */
#greetings{position:absolute;left:5%;top:20%;z-index:40}
#greetings h1{font-family:'Great Vibes',cursive;font-size:64px;color:#ffb9e3;text-shadow:0 8px 30px rgba(255,120,200,0.08)}
#greetings h2{margin-top:8px;color:var(--gold);font-size:18px}

/* --- star (created by JS) --- */
.star{position:absolute;border-radius:50%;background:linear-gradient(#fff,#ffd);opacity:0.9;box-shadow:0 0 8px rgba(255,255,255,0.9)}

/* clouds */
.cloud{position:absolute;background:rgba(255,255,255,0.06);border-radius:50%;filter:blur(18px);z-index:5}

/* lantern */
.lantern{position:absolute;font-size:28px;z-index:30;opacity:.9}

/* floating text & image styles */
.floating-text{position:absolute;color:#ffb1e8;font-family:'Great Vibes',cursive;font-size:26px;z-index:35;text-shadow:0 4px 18px rgba(255,120,170,0.12)}
.floating-img{position:absolute;border-radius:8px;z-index:34;box-shadow:0 12px 30px rgba(0,0,0,0.5)}

/* --- RABBIT (CSS animated sprite) --- */
#rabbit{position:fixed;right:-18%;bottom:12%;width:120px;height:96px;z-index:60;pointer-events:none;opacity:0;transform-origin:center;filter:drop-shadow(0 18px 30px rgba(0,0,0,0.6))}
.rabbit-ear{position:absolute;width:18px;height:44px;background:#fff;border-radius:12px;top:-22px;box-shadow:0 2px 6px rgba(0,0,0,0.15)}
.ear-left{left:28px;transform-origin:center;border-top-left-radius:12px;border-top-right-radius:12px;transform:rotate(-12deg)}
.ear-right{right:28px;transform-origin:center;transform:rotate(12deg)}
.rabbit-head{position:absolute;left:16px;top:4px;width:88px;height:64px;background:#fff;border-radius:40px;display:flex;align-items:center;justify-content:center}
.rabbit-head .eye{width:8px;height:8px;background:#222;border-radius:50%;position:absolute;top:26px}
.rabbit-head .eye.left{left:28px} .rabbit-head .eye.right{right:28px}
.rabbit-head .nose{position:absolute;bottom:18px;width:10px;height:6px;background:#ffb6c9;border-radius:6px}
.rabbit-body{position:absolute;left:10px;top:48px;width:100px;height:44px;background:#fff;border-radius:22px}
.leg{position:absolute;width:18px;height:28px;background:#f7f7f7;border-radius:10px;bottom:-6px;box-shadow:inset 0 -6px 6px rgba(0,0,0,0.03)}
.leg-front{right:18px} .leg-back{left:18px}

/* rabbit running animation (horizontal movement + leg/ear bob) */
@keyframes rabbitRun {
  0%{right:-20%;opacity:1}
  50%{transform:translateY(-6px)}
  100%{right:112%;opacity:1}
}
@keyframes earWiggle {0%{transform:rotate(-6deg)}50%{transform:rotate(6deg)}100%{transform:rotate(-6deg)}}
@keyframes legMove {0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

/* --- logo top-left (shows after rabbit) --- */
#logoBtn{
  position:fixed;
  top:18px;left:18px;
  z-index:80;
  width:72px;height:72px;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  opacity:0;transform:translateY(-6px) scale(.9);
  transition:all .45s cubic-bezier(.2,.9,.2,1);
  box-shadow:0 10px 30px rgba(0,0,0,0.45);
  backdrop-filter:blur(6px);
  background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));
  pointer-events:none; /* ✅ fix click trễ */
}
.logo-circle{
  width:62px;height:62px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg,#ffd8e6,#ffd0a6);
  color:#3b0d2f;font-weight:700;
  box-shadow:0 8px 30px rgba(255,140,190,0.12);
}
#logoBtn.visible{
  opacity:1;
  transform:translateY(0) scale(1);
  pointer-events:auto; /* ✅ kích hoạt click ngay */
}

/* --- popup envelope (center small card) --- */
#popupOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);backdrop-filter:blur(3px);z-index:200;opacity:0;pointer-events:none;transition:opacity .22s ease}
#popupOverlay.show{opacity:1;pointer-events:auto}

/* envelope structure */
#envelope{position:relative;width:min(760px,92vw);max-width:820px;height:auto;transform-style:preserve-3d;perspective:900px}
.envelope-top{position:absolute;left:50%;transform:translateX(-50%);top:-36px;width:80%;height:80px;background:linear-gradient(180deg,#ffd8e6,#fff0d8);border-radius:6px 6px 0 0;z-index:5;transform-origin:top center;box-shadow:0 10px 40px rgba(0,0,0,0.25)}
.envelope-body{background:linear-gradient(180deg,#fffaf3,#fff0e1);padding:28px;border-radius:8px;box-shadow:0 20px 80px rgba(0,0,0,0.5);border:1px solid rgba(0,0,0,0.06)}
.letter-inner{display:flex;gap:18px;align-items:center}
.letter-title{font-family:'Great Vibes',cursive;color:#ff6ea8;font-size:28px;margin:0 0 6px 0}
.letter-msg{color:#3b2b2b;margin:0 0 6px 0}
.gift-area{width:260px;height:180px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.85));box-shadow:inset 0 -6px 18px rgba(0,0,0,0.04)}
#giftBox{font-size:58px;cursor:pointer;transition:transform .18s ease}
#giftBox:hover{transform:translateY(-6px) scale(1.05)}

/* close button */
#closeLetter{position:absolute;right:-10px;top:-24px;background:#fff;border-radius:50%;width:36px;height:36px;box-shadow:0 6px 18px rgba(0,0,0,0.2);font-size:16px}

/* envelope open animation (flip top) */
.envelope-open .envelope-top{animation:openTop .6s ease forwards}
@keyframes openTop{0%{transform:translateX(-50%) rotateX(0deg)}100%{transform:translateX(-50%) rotateX(-180deg)}}

/* small responsive */
@media (max-width:900px){
  #greetings h1{font-size:42px}
  .envelope-top{height:62px}
  .letter-inner{flex-direction:column}
}
/* ===== MOBILE FIX (Dưới 768px) ===== */
@media (max-width: 768px) {
  #greetings h1 {
    font-size: 40px;
  }
  #greetings h2 {
    font-size: 16px;
  }
  #moon {
    width: 120px;
    height: 120px;
    top: 6%;
    right: 6%;
  }
  #rabbit {
    width: 80px;
    height: 64px;
    bottom: 10%;
  }
  #logoBtn {
    width: 56px;
    height: 56px;
  }
  .logo-circle span {
    font-size: 12px;
    line-height: 1.1;
  }
  /* Bức thư hiển thị đẹp hơn */
  #envelope {
    width: 90vw;
  }
  .letter-inner {
    flex-direction: column;
    text-align: center;
  }
  .gift-area {
    width: 100%;
    height: 140px;
  }
  #giftBox {
    font-size: 48px;
  }
}
/* ===== TẮT HIỆU ỨNG MỜ NỀN TRÊN MOBILE ===== */
@media (max-width: 768px) {
  #logoBtn {
    backdrop-filter: none !important;
  }
}

/* ✅ Auto fit toàn bộ giao diện cho mọi điện thoại ngang */
@media screen and (orientation: landscape) {
  html, body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    transform-origin: center center;
  }

  /* Giảm nhẹ toàn bộ scale cho vừa với màn hình nhỏ */
  @media screen and (max-width: 900px) {
    #sceneWrapper {
      transform: scale(0.85);
      transform-origin: center center;
    }
  }

  @media screen and (max-width: 700px) {
    #sceneWrapper {
      transform: scale(0.75);
      transform-origin: center center;
    }
  }

  @media screen and (max-width: 600px) {
    #sceneWrapper {
      transform: scale(0.68);
      transform-origin: center center;
    }
  }
}

/* ✅ Responsive cho màn hình dọc điện thoại */
@media screen and (orientation: portrait) {
  html, body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }

  #sceneWrapper {
    transform: scale(0.9);
    transform-origin: center top;
  }

  /* Màn hình nhỏ hơn 700px (điện thoại phổ biến) */
  @media screen and (max-width: 700px) {
    #sceneWrapper {
      transform: scale(0.8);
      transform-origin: center top;
    }

    #moon {
      width: 120px;
      height: 120px;
      top: 6%;
      right: 6%;
    }

    #greetings h1 {
      font-size: 42px;
    }
    #greetings h2 {
      font-size: 16px;
    }

    #logoBtn {
      width: 60px;
      height: 60px;
    }

    #rabbit {
      bottom: 10%;
      width: 90px;
      height: 70px;
    }
  }

  /* Màn hình nhỏ hơn 500px (iPhone SE, Android mini) */
  @media screen and (max-width: 500px) {
    #sceneWrapper {
      transform: scale(0.7);
    }
    #greetings h1 {
      font-size: 36px;
    }
    #greetings h2 {
      font-size: 14px;
    }
  }
}

/* 🌟 Floating small images fade in/out */
.floating-img {
  position: absolute;
  border-radius: 10px;
  box-shadow: 0 0 18px rgba(255, 200, 255, 0.45);
  opacity: 0;
  animation: fadePulse 6s ease-in-out infinite;
  z-index: 5;
  pointer-events: none;
  transition: transform 8s ease, left 8s linear, top 8s linear;
}

@keyframes fadePulse {
  0%, 100% { opacity: 0; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.1); }
}

